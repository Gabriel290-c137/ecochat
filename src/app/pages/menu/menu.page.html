<ion-header class="ion-no-border">
  <ion-toolbar>
    <!-- Botón de menú a la izquierda -->
    <ion-buttons slot="start">
      <ion-menu-button auto-hide="false" (click)="irHistorial()"></ion-menu-button>
    </ion-buttons>
    
    <ion-title>Menu</ion-title>

    <!-- Botón de editar a la derecha -->
    <ion-buttons slot="primary">
      <ion-button>
        <ion-icon slot="end" name="create"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="page-login">
    <!-- Galería de fotos -->
    <ion-grid>
      <ion-row>
        <ion-col size="5" *ngFor="let photo of photoService.photos; index as position">
          <ion-img [src]="photo.webviewPath"></ion-img>
        </ion-col>
      </ion-row>
    </ion-grid>

    <ion-grid>
      <ion-row>
        <ion-col size="5" *ngFor="let photo of uploadService.upload; index as position">
          <ion-img [src]="photo.webviewPath"></ion-img>
        </ion-col>
      </ion-row>
    </ion-grid>

    <!-- Respuesta del asistente -->
    <div *ngIf="respuesta">
      <h2>Respuesta:</h2>
      <p>{{ respuesta }}</p>
    </div>
  </div>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <!-- Botón de cámara y menú alineados a la izquierda -->
    <ion-buttons slot="start">
      <ion-button shape="round" size="small" color="dark" (click)="addPhotoToGallery()">
        <ion-icon slot="icon-only" name="camera"></ion-icon>
      </ion-button>

      <ion-menu-button auto-hide="false" (click)="irHome()"></ion-menu-button>
    </ion-buttons>

    <!-- Input de texto al centro -->
    <ion-item lines="none" style="flex: 1;">
      <ion-input
        placeholder="Enviar mensaje a EcoChat"
        [(ngModel)]="pregunta"
        (keyup.enter)="obtenerRespuesta()">
      </ion-input>
    </ion-item>

    <!-- Botones alineados a la derecha -->
    <ion-buttons slot="end">
      <!-- Botón de envío original (negro) -->
      <ion-button shape="round" color="dark" (click)="obtenerRespuesta()" [disabled]="isLoading">
        <ion-icon slot="icon-only" name="send"></ion-icon>
      </ion-button>

      <ion-button shape="round" color="dark" (click)="grabarAudio()" [disabled]="isLoading">
        <ion-icon slot="icon-only" name="mic"></ion-icon>
      </ion-button>

    </ion-buttons>
  </ion-toolbar>
</ion-footer>

<ion-fab vertical="bottom" horizontal="end" slot="fixed" style="margin-right: 90px; margin-bottom: -10px;">
  <ion-fab-button color="dark" size="small">
    <ion-icon name="add"></ion-icon>
  </ion-fab-button>

  <ion-fab-list side="top">
    <ion-fab-button color="dark" size="small" (click)="addPhotoToUpload()">
      <ion-icon name="camera"></ion-icon>
    </ion-fab-button>
    
    <ion-fab-button color="success" size="small" (click)="enviar()" [disabled]="isLoading">
      <ion-icon name="send"></ion-icon>
    </ion-fab-button>
  </ion-fab-list>
</ion-fab>

      <!-- Nuevo botón de envío (verde) -->
      <!-- <ion-button shape="round" color="success" (click)= "enviar" [disabled]="isLoading">
        <ion-icon slot="icon-only" name="send"></ion-icon>
      </ion-button> -->